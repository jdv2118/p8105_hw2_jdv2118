---
title: "p8105_hw2_jdv2118"
output: github_document
---
```{r}
library(tidyverse)

library(readxl)

library(dplyr)

library(janitor)

library(tidyr)

library(lubridate)
```

# Problem 2

```{r}
mr_trash_wheel = 
  read_excel("data/Trash Wheel Collection Data.xlsx", "Mr. Trash Wheel", range = "A2:N550") %>%
  clean_names(dat = .) %>%
  mutate(sports_balls = 
  as.integer(
  round(sports_balls)), 
  trash_wheel = 1, 
  year =
  as.integer(year)) %>%
  drop_na(data = ., dumpster) %>%
  select(trash_wheel, everything())

head(mr_trash_wheel)

view(mr_trash_wheel)
```

```{r}
prof_trash_wheel = 
  read_excel("data/Trash Wheel Collection Data.xlsx", "Professor Trash Wheel", range = "A2:M97") %>%
  clean_names(dat = .) %>%
  mutate(trash_wheel = 2) %>%
  drop_na(data = ., dumpster) %>%
  select(trash_wheel, everything())

head(prof_trash_wheel)

view(prof_trash_wheel)
```

```{r}
trash_wheel_tidy =
  bind_rows(mr_trash_wheel, prof_trash_wheel)

view(trash_wheel_tidy)
```

# Problem 3 

```{r}
pols =
  read_csv("data/pols-month.csv") %>%
  clean_names(dat = .) %>%
  separate(col = mon,   into = c("year", "month", "day"), sep = "-") %>%
  mutate(
    year = as.numeric(year), 
    month = as.numeric(month), 
    day = as.numeric(day),
    month = month.abb[as.numeric(month)],
    president = 
      if_else(prez_gop == 1, 'gop', 'dem')) %>% 
    select(-prez_dem, -prez_gop, -day) %>%
  arrange(year, month)

head(pols)
view(pols)

snp = 
  read_csv("data/snp.csv") %>%
  clean_names(dat = .) %>%
  mutate(date = parse_date_time2(date,'mdy', cutoff_2000 = 49)) %>%
  separate(col = date,   into = c("year", "month", "day"), sep = "-") %>%
  mutate( 
    year = as.numeric(year),
    month = month.abb[as.numeric(month)]) %>% 
    select(-day) %>%
  arrange(year, month) %>%
  select(year, month, everything())

head(snp)
view(snp)

unemployment =
  read_csv("data/unemployment.csv") %>%
  clean_names(dat = .) %>%
  pivot_longer(
    jan:dec,
    names_to = "month", 
    values_to = "unemployment_percentage"
    ) %>%
  mutate(month = str_to_title(month)) %>%
  arrange(year, month) %>%
  select(year, month, everything())
  
head(unemployment)
view(unemployment)
```

```{r}
pols_snp =
  left_join(pols, snp, by = c("year", "month"))

view(pols_snp)

pols_snp_unemployment =
  left_join(pols_snp, unemployment, by = c("year", "month"))

head(pols_snp_unemployment)
view(pols_snp_unemployment)
```


